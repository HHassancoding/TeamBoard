### Task Requests - HTTP Testing File
### Base URL: http://localhost:8080/api

### Variables
@baseUrl = http://localhost:8080/api
@token = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI1IiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c
@workspaceId = 1
@projectId = 1
@taskId = 1
@columnId = 1
@userId = 2

---

### 1. Create Task in Project (defaults to Backlog column)
POST {{baseUrl}}/projects/{{projectId}}/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Implement user authentication",
  "description": "Add JWT token-based authentication to the backend",
  "assignedTo": {{userId}},
  "priority": "HIGH",
  "dueDate": "2025-01-20T23:59:59Z"
}

---

### 1a. Create Task - Minimal (only title required)
POST {{baseUrl}}/projects/{{projectId}}/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Design database schema"
}

---

### 1b. Create Task - With Medium Priority (default)
POST {{baseUrl}}/projects/{{projectId}}/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Review pull requests",
  "description": "Code review for feature branch",
  "priority": "MEDIUM"
}

---

### 1c. Create Task - Low Priority, No Assignee
POST {{baseUrl}}/projects/{{projectId}}/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Update documentation",
  "description": "Update API documentation with new endpoints",
  "priority": "LOW"
}

---

### 2. Get All Tasks in Project
GET {{baseUrl}}/projects/{{projectId}}/tasks
Authorization: Bearer {{token}}

---

### 2a. Get Tasks in Project - Filter by Column
GET {{baseUrl}}/projects/{{projectId}}/tasks?columnId={{columnId}}
Authorization: Bearer {{token}}

---

### 2b. Get Tasks in Project - Filter by Assignee
GET {{baseUrl}}/projects/{{projectId}}/tasks?assignedTo={{userId}}
Authorization: Bearer {{token}}

---

### 2c. Get Tasks in Project - Filter by Priority
GET {{baseUrl}}/projects/{{projectId}}/tasks?priority=HIGH
Authorization: Bearer {{token}}

---

### 2d. Get Tasks in Project - Filter by Multiple Criteria
GET {{baseUrl}}/projects/{{projectId}}/tasks?columnId={{columnId}}&priority=HIGH&assignedTo={{userId}}
Authorization: Bearer {{token}}

---

### 3. Get Single Task Detail
GET {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer {{token}}

---

### 4. Update Task
PUT {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Implement user authentication - Updated",
  "description": "Add JWT token-based authentication to the backend with refresh tokens",
  "assignedTo": {{userId}},
  "priority": "CRITICAL",
  "dueDate": "2025-01-25T23:59:59Z"
}

---

### 4a. Update Task - Only Title
PUT {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Update task title only"
}

---

### 4b. Update Task - Only Priority
PUT {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "priority": "LOW"
}

---

### 4c. Update Task - Only Assignee
PUT {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "assignedTo": {{userId}}
}

---

### 4d. Update Task - Unassign (set assignedTo to null)
PUT {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "assignedTo": null
}

---

### 4e. Update Task - Clear Description
PUT {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "description": null
}

---

### 5. Move Task to Different Column (Drag & Drop)
PATCH {{baseUrl}}/tasks/{{taskId}}/column/{{columnId}}
Authorization: Bearer {{token}}
Content-Type: application/json

{}

---

### 5a. Move Task to Column 2 (To Do)
PATCH {{baseUrl}}/tasks/{{taskId}}/column/2
Authorization: Bearer {{token}}
Content-Type: application/json

{}

---

### 5b. Move Task to Column 3 (In Progress)
PATCH {{baseUrl}}/tasks/{{taskId}}/column/3
Authorization: Bearer {{token}}
Content-Type: application/json

{}

---

### 5c. Move Task to Column 4 (Done)
PATCH {{baseUrl}}/tasks/{{taskId}}/column/4
Authorization: Bearer {{token}}
Content-Type: application/json

{}

---

### 6. Delete Task
DELETE {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer {{token}}

---

### Error Cases (Testing validation)

### Error: Create Task Without Title (should fail)
POST {{baseUrl}}/projects/{{projectId}}/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "description": "Task without title"
}

---

### Error: Create Task with Invalid Priority (should fail)
POST {{baseUrl}}/projects/{{projectId}}/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Test task",
  "priority": "INVALID"
}

---

### Error: Create Task with Invalid Project ID (should fail)
POST {{baseUrl}}/projects/999/tasks
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Test task"
}

---

### Error: Get Non-existent Task (should fail)
GET {{baseUrl}}/tasks/999
Authorization: Bearer {{token}}

---

### Error: Update Non-existent Task (should fail)
PUT {{baseUrl}}/tasks/999
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "Updated title"
}

---

### Error: Delete Non-existent Task (should fail)
DELETE {{baseUrl}}/tasks/999
Authorization: Bearer {{token}}

---

### Error: Move Task to Non-existent Column (should fail)
PATCH {{baseUrl}}/tasks/{{taskId}}/column/999
Authorization: Bearer {{token}}
Content-Type: application/json

{}

---

### Error: Unauthorized Access (no token)
GET {{baseUrl}}/tasks/{{taskId}}

---

### Error: Invalid Token (should fail)
GET {{baseUrl}}/tasks/{{taskId}}
Authorization: Bearer invalid_token

---

